Default = Debug

General {
	CompilerFlags		= -Wall -Wextra -pedantic -pedantic-errors -pipe -mfpmath=both -march=nocona -mno-stack-arg-probe -mno-accumulate-outgoing-args -mpush-args -DUSE_DL_PREFIX -DUSE_BUILTIN_FFS

	CFlags				= -std=c11

	IgnoredFiles		= .Built* *.h *.mcfproj

	Compilers {
		c {
			CommandLine	= gcc -x c -c $CompilerFlags$ $CFlags$ %IN% -o %OUT%
			Dependency	= gcc -x c -c $CompilerFlags$ $CFlags$ %IN% -MM
		}
	}

	Linkers {
		Partial			= ld -r %IN% -o %OUT%
		Full			= gcc-ar rcs %OUT% %IN%
	}

	DefaultOutput		= libdlmalloc.a
}

Debug = General {
	CompilerFlags		=> -fno-builtin -g -O0 -DDEBUG
}

Release = General {
	CompilerFlags		=> -DNDEBUG -O3 -flto -ffunction-sections -fdata-sections
}
